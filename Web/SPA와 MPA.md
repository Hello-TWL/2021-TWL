# Single-Page Application vs. Multiple-Page Application

웹 애플리케이션은 <u>데스크탑 애플리케이션</u>[^1]을 대체하는 것이 자연스러운 시대를 살고 있다. 웹 애플리케이션은 사용이 편리하고, 업데이트 하기도 쉬우며, 하나의 디바이스에 얽매이지 않는다. 브라우저 기반 웹 애플리케이션에서 모바일 애플리케이션으로 자연스럽게 이동하고 있지만, 복잡하면서도 정교한 애플리케이션에 대한 수요는 이미 엄청나며 여전히 증가하고 있다.

자신만의 애플리케이션을 만드는 방법을 고민하고 있다면 웹 애플리케이션의 두 가지 주요 설계 패턴(design pattern), 즉 MPA와 SPA가 있다는 이야기를 들어보았을 것이다. 당연하게도, 두 모델은 모두 장점과 단점을 가지고 있다.

내가 가진 아이디어를 실제 애플리케이션으로 전환하기 전에 여러 중요한 질문에 답할 필요가 있다. 둘 중에 어떤 앱 모델이 더 나을지 결정하려면 먼저 <u>콘텐츠 우선 접근 방식(content-first approach)</u>[^2]을 따르는 것이 중요하다. 콘텐츠는 사용자가 애플리케이션 사용 여부를 결정하는 주된 이유이기 때문이다. 이를 통해 가장 중요한 질문, 즉 사용자가 가장 관심을 가질 콘텐츠가 무엇일까에 대한 질문을 할 수 있다.

-----
[^1]: 인터넷에 연결된 어디서든 브라우저에서 실행할 수 있는 웹 애플리케이션과는 달리, 데스크탑 애플리케이션은 Personal Computer에 설치 후 운영체제의 기능을 활용해 사용할 수 있다.

[^2]:애플리케이션이 제공하는 내용이 애플리케이션 설계를 결정하는 접근 방식. 텍스트, 사진, 차트, 표, 목록 등 페이지나 화면에 표시할 수 있는 모든 요소가 내용이 될 수 있다.

-----



## Single-Page Application

SPA는 브라우저에서 동작하며 사용하는 동안 브라우저를 다시 로드할 필요가 없는 애플리케이션이다. Gmail, 구글 지도, 페이스북 또는 Github이 이러한 유형에 속한다. SPA는 브라우저에 많이 의존하고, 브라우저의 자연스러운 환경을 모방하여 페이지를 다시 로드하거나 추가 대기 시간이 없는 등 탁월한 사용자 경험(UX)를 제공한다. SPA는 그저 사용자가 방문한 하나의 웹 페이지로, 다른 모든 컨텐츠는 자바스크립트를 사용하여 불러온다.

SPA는 <u>마크업</u>[^3]과 데이터를 서로 독립적으로 요청하고 브라우저에서 페이지를 바로 만든다. `앵귤러JS`, `Ember.js`, `Meteor.js`, `Knockout.js`와 같은 고급 자바스크립트 <u>프레임워크</u>[^4]가 이를 가능하게 도와준다. SPA는 사용자가 하나의 편안한 웹 공간 안에서 간단하고, 쉽고, 작업하기 쉬운 방식으로 콘텐츠를 제공한다. 



### SPA의 장점

1. SPA는 빠르다: 

   대부분의 리소스(HTML + CSS + Scripts)는 웹 애플리케이션 수명 동안 한 번만 가져와진다. 단지, 웹 페이지에 뿌려질 데이터만 앞뒤로 전송된다.

2. SPA 개발은 단순화 및 간소화 된다: 

   웹 페이지를 만들기 위한 코드를 서버에 작성할 필요가 없다. 서버를 전혀 사용하지 않고도 보통 `file://URL`에서 개발을 시작할 수 있기 때문에 시작하기도 쉽다.

3. Chrome 디버깅이 쉽다: 

   Chrome에서 제공하는 개발자 도구를 통해 네트워크 작업을 모니터링하고 페이지 요소 및 페이지 렌더링 관련 데이터를 조사할 수 있다.

4. 쉬운 모바일 애플리케이션 개발: 

   웹 애플리케이션과 기본 모바일 애플리케이션에 동일한 백엔드 코드를 재사용할 수 있다.

5. 효과적인 로컬  스토리지 캐싱: 

   애플리케이션은 한 번만 요청을 보낸 후 모든 데이터를 불러와 저장한 다음 데이터를 사용할 수 있으며 이를 통해 오프라인에서도 작동할 수 있다. 

### SPA의 단점

1. 까다로운 <u>SEO</u>[^5] 최적화: 

   SPA는 페이지를 새로 고치지 않고 애플리케이션에서 비동기적으로 데이터를 교환하고 업데이트 하는 방법인 AJAX로 콘텐츠를 로딩한다.

   :pencil2: **note**: <u>동형 렌더링(Isomorphic Rendering)</u>[^6] 혹은 <u>서버 사이드 렌더링(SSR; Server-Side Rendering)</u>[^7]을 사용하여 서버에서 페이지를 이미 만들어 둘 수 있다. 다시 말해, 초기 렌더링은 서버에 있고 캐싱할 수 있으며, 자바스크립트를 비활성화하는 것은 만들어진 페이지를 얻는 데 크게 문제가 되지 않는다. SEO 최적화도 당연히 서버에서 처리될 수 있다. 대부분의 대형 검색 엔진도 이미 자바스크립트를 해석하고 있으므로 서버 사이드 렌더링 없이 SPA를 사용하더라도 SEO 성능에 부정적인 영향을 미치지 않을 수 있다.

2. 느린 다운로드:

   클라이언트 프레임워크가 클라이언트에 로드되어야 하기 때문이다.

3. 자바스크립트 사용 설정:

   사용자가 브라우저에서 자바스크립트 실행을 중지하면 애플리케이션과 관련된 작업을 올바르게 표시할 수 없다. 

   :pencil2: **note**: 앞서 동형 렌더링 / 서버 사이드 렌더링을 통해 이미 서버에서 페이지를 만들 수 있다고 적어뒀다. 초기 렌더링이 서버에서 이루어지고 캐싱할 수 있는 경우 사용자가 브라우저에서 자바스크립트를 비활성화하더라도 만들어진 페이지를 가져오는 데 이론적으로는 문제가 되지 않는다. 그러나 당연하게도 자바스크립트 비활성화는 다른 기능들에 문제가 될 수 있다. HTML과 CSS에서 많은 것들을 할 수 있지만 완전히 자바스크립트를 대신할 수 없기 때문.

4. 떨어지는 보안성:

   기존의 전통 애플리케이션에 비해 SPA는 보안성이 떨어진다. <u>크로스 사이트 스크립팅(XSS; Cross-Site-Scripting)</u>[^8]으로 인해, 공격자는 다른 사용자가 클라이언트 측 스크립트를 웹 애플리케이션에 주입할 수 있다.

5. 자바스크립트에서 <u>메모리 누수(Memory leak)</u>[^9]는 시스템 속도를 저하시킬 가능성이 있다.

   

-----

[^3]: 웹 애플리케이션의 뼈대. `<div>`, `<span>`, `<a>` 등 수많은 html 태그들로 이루어져 있다.
[^4]: 프로그래밍에 따라 표준 구조를 표현하는 클래스와 라이브러리의 집합. 쉽게 말하면, 목적에 따라 효율적으로 구조를 짜놓은 개발 방식, 또는 툴(tool)
[^5]:Search Engine Optimization(검색 엔진 최적화). SPA의 등장으로 Client-Side Rendering은 더 나은 UX 제공을 위한 중요한 요소가 되었다. 이에, 어디까지 서버에서 렌더링하고 어디부터 클라이언트에서 렌더링할지에 대한 고민이 생겼다. SEO는 이를 위한 첫 번째 고려사항이 되었다. 네트워크 상에는 구글봇과 같이 컨텐츠를 수집하는 다양한 bot이 존재한다. 봇이 수집한 콘텐츠는 여러 검색 엔진의 검색 대상으로 분류될 수 있다. 대부분의 봇들은 자바스크립트를 실행하지 못하며, 구글봇은 그나마 자바스크립트를 실행시킬 수 있으나, 동적인 호출을 통한 렌더링까지는 실행시키지 못한다. 이런 봇들은 렌더링된 HTML에서만 콘텐츠를 수집하기 때문에 클라이언트에서만 렌더링하는 웹 페이지는 빈 페이지로 인식한다. 페이지의 내용에 따라 SEO를 고려하여 어느 부분까지 서버에서 렌더링 할지 생각해볼 필요가 있다.
[^6]:개발에서 말하는 Isomorphic은 동일한 소스코드를 서버와 클라이언트단에 작성하는 형태를 지칭한다. 클라이언트와 서버에서 동일한 렌더링 엔진을 사용하므로 개발자들이 마크업 템플릿을 쉽게 유지관리할 수 있도록 한다.
[^7]:페이지 이동 발생 시 새로운 페이지를 요청하는 방식이다. 모든 템플릿은 서버 연산을 통해서 렌더링하여 완성된 페이지 형태로 응답한다. SEO는 SSR을 통해 얻을 수 있는 가장 큰 장점이다. 단점으로는 프로젝트의 복잡도가 증가하며 페이지 이동시 화면이 깜빡이고(새로고침) 서버 렌더링에 따른 서버 부하가 발생한다.
[^8]: 웹 애플리케이션에서 나타나는 취약점 중 하나. 웹 사이트 관리자가 아닌 사람이 웹 페이지에 악성 스크립트를 삽입할 수 있는 취약점이다. 주로 여러 사용자가 보는 전자 게시판에 악성 스크립트가 담긴 글을 올리는 형태로 이루어진다. 해커는 이를 통해 사용자의 정보(쿠키, 세션)를 탈취하거나 자동으로 비정상적인 기능을 수행하게 한다. HTTP `X-XSS-Protection` 헤더는 브라우저에서 제공하는 기능으로 XSS 공격을 감지할 때 페이지 로드를 중지할 수 있다. 최신 브라우저에서는 Inline Javascript 사용을 못하게 하는 CSP(Content-Security-Policy) 보호 기능이 있다.
[^9]: 컴퓨터 프로그램이 필요하지 않은 메모리를 계속 점유하고 있는 현상. 자바스크립트는 객체가 생성되었을 때 자동으로 메모리를 할당하고 쓸모 없어졌을 때 가비지 컬렉션으로 자동으로 해제한다. 자바스크립트에서 Memory leak은 객체가 더 이상 필요하지 않을 수 있지만 자바스크립트 런타임에서는 여전히 필요하다고 생각할 때 발생한다. 자바스크립트의 Memory leak은 잘못된 코드 때문이 아닌 코드의 논리적 결함으로부터 발생하는 경우가 많다. 

-----



## Multiple-Page Application

MPA는 `전통적인` 방식으로 동작한다. 브라우저에서 데이터를 표시하거나 다시 서버에 데이터를 제출하는 등의 모든 변경 사항은 브라우저와 서버가 상호작용한 결과물이다. 당연히 MPA 기반의 애플리케이션은 SPA보다 클 수밖에 없다. 콘텐츠의 양으로 인해 MPA에는 다양한 수준의 User Interface가 있다. 그러나 AJAX 덕분에 더 크고 복잡한 애플리케이션이 서버와 브라우저 간 많은 데이터를 전송함에 있어서 걱정할 필요가 없어졌다. 애플리케이션의 특정 부분만 새로 고칠 수 있어졌기 때문이다. 그렇지만 SPA보다 복잡성이 가중되고 개발하기가 쉽지는 않다. 

### MPA의 장점

1. 애플리케이션에서 어디로 이동해야 하는지 시각적으로 매핑해야 하는 사용자에게 완벽한 모델이다. 몇 가지 수준의 견고한 메뉴 탐색은 기존의 다중 페이지 응용 프로그램에서 필수적인 부분이다.

2. SEO 관리가 쉽고 우수하다. 애플리케이션이 페이지당 하나의 키워드에 최적화될 수 있기 때문에 다른 키워드에 대해 순위를 매길 수 있는 더 좋은 기회를 제공한다.

   

### MPA의 단점

1. 모바일 애플리케이션과 동일한 백엔드 옵션이 없었다.

   :pencil2: **note**: 지금은 MPA와 모바일 애플리케이션 모두에 동일한 백엔드를 사용할 수 있게 됐다.

2. 프론트엔드 및 백엔드 개발이 서로 긴밀하게 결합되어 있기 때문에 개발이 상당히 복잡하다.
3. 개발자는 클라이언트 측과 서버 측 모두 프레임워크를 사용해야 하므로 애플리케이션 개발 기간이 길어진다.



## SPA or MPA ?

웹 애플리케이션을 배포하기 전에 애플리케이션의 목적이 무엇인지 고려할 필요가 있다. 예를 들어, 온라인 샵을 운영한다거나 다양한 콘텐츠를 퍼블리싱하기 때문에 여러 카테고리가 필요한 경우 MPA가 적합하다. (그래도 SPA에 적합하다고 확신하면 SPA를 써도 된다)

SPA를 선호하지만 한 페이지에 모든 콘텐츠를 담을 수 없다면 하이브리드 애플리케이션을 고려하는 것도 하나의 방법이 될 수 있다. 하이브리드 애플리케이션은 SPA와 MPA에서 각각 최적인 것을 취하여 단점을 최소화하려고 시도한다. 사실, URL 앵커를 합성 페이지(synthetic pages)로 사용하는 SPA은 빌드 브라우저 탐색 및 기본 설정 기능을 더욱 활성화하고 있다. 그러나 이것은 SPA와 MPA에 대한 내용이 아니니까 여기서 마무리한다.

아마도 미래에는 하이브리드 애플리케이션을 포함한 SPA를 사용하게 될 것이다. 그러나 시장에 출시된 많은 앱이 SPA 모델로 마이그레이션 되고 있더라도 일부 프로젝트의는 단순히 SPA에 맞지 않기 때문에 MPA 모델은 여전히 유효하다. 

선택은 결국 개발자의 몫이다.

